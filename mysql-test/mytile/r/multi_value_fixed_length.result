#
# The purpose of this test is to test multi value cells of fixed_length attributes functionality
#
call mtr.add_suppression("\\[ERROR\\] (mysqld|mariadbd): Error in creating table \\[TileDB::ArraySchema\\] Error: Cannot set domain; Domain must contain at least one dimension");
CREATE TABLE multi_attribute ENGINE=mytile uri='MTR_SUITE_DIR/test_data/tiledb_arrays/multi_attribute';;
show create table multi_attribute;
Table	Create Table
multi_attribute	CREATE TABLE `multi_attribute` (
  `rows` int(11) NOT NULL `dimension`=1 `lower_bound`='1' `upper_bound`='4' `tile_extent`='2',
  `cols` int(11) NOT NULL `dimension`=1 `lower_bound`='1' `upper_bound`='4' `tile_extent`='2',
  `a4` blob NOT NULL DEFAULT 0.000000,
  `a3` blob NOT NULL DEFAULT -2147483648,
  `a2` blob NOT NULL DEFAULT 0.000000,
  PRIMARY KEY (`rows`,`cols`)
) ENGINE=MyTile DEFAULT CHARSET=latin1 `uri`='MTR_SUITE_DIR/test_data/tiledb_arrays/multi_attribute' `array_type`='DENSE' `cell_order`=ROW_MAJOR `tile_order`=ROW_MAJOR `coordinate_filters`='ZSTD=-1' `offset_filters`='ZSTD=-1'
DESCRIBE `multi_attribute`;
Field	Type	Null	Key	Default	Extra
rows	int(11)	NO	PRI	NULL	
cols	int(11)	NO	PRI	NULL	
a4	blob	NO		0.000000	
a3	blob	NO		-2147483648	
a2	blob	NO		0.000000	
SELECT
ASCII(SUBSTRING(a2, 1, 1)),
ASCII(SUBSTRING(a2, 2, 1)),
ASCII(SUBSTRING(a2, 3, 1)),
ASCII(SUBSTRING(a2, 4, 1)),
ASCII(SUBSTRING(a2, 5, 1)),
ASCII(SUBSTRING(a2, 6, 1)),
ASCII(SUBSTRING(a2, 7, 1)),
ASCII(SUBSTRING(a2, 8, 1)),
ASCII(SUBSTRING(a3, 1, 1)),
ASCII(SUBSTRING(a3, 2, 1)),
ASCII(SUBSTRING(a3, 3, 1)),
ASCII(SUBSTRING(a3, 4, 1)),
ASCII(SUBSTRING(a3, 5, 1)),
ASCII(SUBSTRING(a3, 6, 1)),
ASCII(SUBSTRING(a3, 7, 1)),
ASCII(SUBSTRING(a3, 8, 1)),
ASCII(SUBSTRING(a4, 1, 1)),
ASCII(SUBSTRING(a4, 2, 1)),
ASCII(SUBSTRING(a4, 3, 1)),
ASCII(SUBSTRING(a4, 4, 1)),
ASCII(SUBSTRING(a4, 5, 1)),
ASCII(SUBSTRING(a4, 6, 1)),
ASCII(SUBSTRING(a4, 7, 1)),
ASCII(SUBSTRING(a4, 8, 1)),
ASCII(SUBSTRING(a4, 9, 1)),
ASCII(SUBSTRING(a4, 10, 1)),
ASCII(SUBSTRING(a4, 11, 1)),
ASCII(SUBSTRING(a4, 12, 1)),
ASCII(SUBSTRING(a4, 13, 1)),
ASCII(SUBSTRING(a4, 14, 1)),
ASCII(SUBSTRING(a4, 15, 1)),
ASCII(SUBSTRING(a4, 16, 1))
FROM multi_attribute;
ASCII(SUBSTRING(a2, 1, 1))	ASCII(SUBSTRING(a2, 2, 1))	ASCII(SUBSTRING(a2, 3, 1))	ASCII(SUBSTRING(a2, 4, 1))	ASCII(SUBSTRING(a2, 5, 1))	ASCII(SUBSTRING(a2, 6, 1))	ASCII(SUBSTRING(a2, 7, 1))	ASCII(SUBSTRING(a2, 8, 1))	ASCII(SUBSTRING(a3, 1, 1))	ASCII(SUBSTRING(a3, 2, 1))	ASCII(SUBSTRING(a3, 3, 1))	ASCII(SUBSTRING(a3, 4, 1))	ASCII(SUBSTRING(a3, 5, 1))	ASCII(SUBSTRING(a3, 6, 1))	ASCII(SUBSTRING(a3, 7, 1))	ASCII(SUBSTRING(a3, 8, 1))	ASCII(SUBSTRING(a4, 1, 1))	ASCII(SUBSTRING(a4, 2, 1))	ASCII(SUBSTRING(a4, 3, 1))	ASCII(SUBSTRING(a4, 4, 1))	ASCII(SUBSTRING(a4, 5, 1))	ASCII(SUBSTRING(a4, 6, 1))	ASCII(SUBSTRING(a4, 7, 1))	ASCII(SUBSTRING(a4, 8, 1))	ASCII(SUBSTRING(a4, 9, 1))	ASCII(SUBSTRING(a4, 10, 1))	ASCII(SUBSTRING(a4, 11, 1))	ASCII(SUBSTRING(a4, 12, 1))	ASCII(SUBSTRING(a4, 13, 1))	ASCII(SUBSTRING(a4, 14, 1))	ASCII(SUBSTRING(a4, 15, 1))	ASCII(SUBSTRING(a4, 16, 1))
255	255	127	127	205	204	76	62	31	0	0	0	0	0	0	0	154	153	153	153	153	153	185	63	154	153	153	153	153	153	201	63
205	204	140	63	154	153	153	63	1	0	0	0	2	0	0	0	154	153	153	153	153	153	241	63	51	51	51	51	51	51	243	63
102	102	6	64	205	204	12	64	3	0	0	0	4	0	0	0	205	204	204	204	204	204	0	64	154	153	153	153	153	153	1	64
102	102	70	64	205	204	76	64	5	0	0	0	6	0	0	0	205	204	204	204	204	204	8	64	154	153	153	153	153	153	9	64
51	51	131	64	102	102	134	64	7	0	0	0	8	0	0	0	102	102	102	102	102	102	16	64	205	204	204	204	204	204	16	64
51	51	163	64	102	102	166	64	9	0	0	0	10	0	0	0	102	102	102	102	102	102	20	64	205	204	204	204	204	204	20	64
51	51	195	64	102	102	198	64	11	0	0	0	12	0	0	0	102	102	102	102	102	102	24	64	205	204	204	204	204	204	24	64
51	51	227	64	102	102	230	64	13	0	0	0	14	0	0	0	102	102	102	102	102	102	28	64	205	204	204	204	204	204	28	64
154	153	1	65	51	51	3	65	15	0	0	0	16	0	0	0	51	51	51	51	51	51	32	64	102	102	102	102	102	102	32	64
154	153	17	65	51	51	19	65	17	0	0	0	18	0	0	0	51	51	51	51	51	51	34	64	102	102	102	102	102	102	34	64
154	153	33	65	51	51	35	65	19	0	0	0	20	0	0	0	51	51	51	51	51	51	36	64	102	102	102	102	102	102	36	64
154	153	49	65	51	51	51	65	21	0	0	0	22	0	0	0	51	51	51	51	51	51	38	64	102	102	102	102	102	102	38	64
154	153	65	65	51	51	67	65	23	0	0	0	24	0	0	0	51	51	51	51	51	51	40	64	102	102	102	102	102	102	40	64
154	153	81	65	51	51	83	65	25	0	0	0	26	0	0	0	51	51	51	51	51	51	42	64	102	102	102	102	102	102	42	64
154	153	97	65	51	51	99	65	27	0	0	0	28	0	0	0	51	51	51	51	51	51	44	64	102	102	102	102	102	102	44	64
102	12	115	70	102	102	194	68	29	0	0	0	30	0	0	0	205	204	204	204	140	97	206	64	205	204	204	204	204	76	152	64
SET mytile_delete_arrays=0;
DROP TABLE `multi_attribute`;
SET mytile_delete_arrays=1;
